function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,(function(e){"use strict";var t=function(){function e(t){var o=this,i=t.root,n=t.rootMargin,r=void 0===n?"0px":n,l=t.threshold,s=void 0===l?0:l;_classCallCheck(this,e),window.IntersectionObserver?(this.root=document.querySelector(i),this.root||(this.root="viewport"),this.rootMargin=r,this.threshold=s,this.els=[],this.observer=new IntersectionObserver(this._callback.bind(this),{root:"viewport"===this.root?null:this.root,rootMargin:this.rootMargin,threshold:this.threshold})):setTimeout((function(){o._onErrorCallback&&o._onErrorCallback()}),0)}return _createClass(e,[{key:"_callback",value:function(e){var t=this;e.forEach((function(e,o){var i=t.els.find((function(t){return t.el.isSameNode(e.target)}));i&&(e.intersectionRatio>i.triggerRatio?(!i.alwaysTrigger&&i.inView||setTimeout((function(){i.onElVisible&&i.onElVisible(i),t._onElVisibleCallback&&t._onElVisibleCallback(i)}),o*i.stagger),i.inView=!0):i.inView&&e.intersectionRatio<=i.triggerRatio&&(i.inView=!1,i.onElHidden&&i.onElHidden(i),t._onElHiddenCallback&&t._onElHiddenCallback(i),i.keepObserving||t._unobserve(i)),i.ratio=e.intersectionRatio,i.boundingClientRect=e.boundingClientRect)}))}},{key:"observe",value:function(e){for(var t=e.elements,o=void 0===t?[]:t,i=e.selector,n=e.keepObserving,r=void 0!==n&&n,l=e.triggerRatio,s=void 0===l?0:l,a=e.alwaysTrigger,u=void 0===a||a,c=e.stagger,f=void 0===c?0:c,d=e.onElVisible,b=void 0===d?function(){}:d,h=e.onElHidden,v=void 0===h?function(){}:h,y=o.length?o:document.querySelectorAll(i),g=0;g<y.length;g++)this.els.push({el:y[g],keepObserving:r,triggerRatio:Math.max(0,Math.min(1,s))||0,alwaysTrigger:u,ratio:0,stagger:f,onElVisible:b,onElHidden:v,inView:!1,boundingClientRect:{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}}),this.observer.observe(y[g])}},{key:"_unobserve",value:function(e){this.observer.unobserve(e.el),this.els=this.els.filter((function(t){return!t.el.isSameNode(e.el)}))}},{key:"unobserveEl",value:function(e){var t=this.els.find((function(t){return t.el.isSameNode(e)}));t&&this._unobserve(t)}},{key:"unobserveEls",value:function(e){for(var t=0;t<e.length;t++)this.unobserveEl(e[t])}},{key:"unobserveAll",value:function(){this.observer.disconnect(),this.els=[]}},{key:"onError",value:function(e){return e&&(this._onErrorCallback=e),this}},{key:"onElVisible",value:function(e){return e&&(this._onElVisibleCallback=e),this}},{key:"onElHidden",value:function(e){return e&&(this._onElHiddenCallback=e),this}}]),e}();e.ScrollObserver=t,Object.defineProperty(e,"__esModule",{value:!0})}));
