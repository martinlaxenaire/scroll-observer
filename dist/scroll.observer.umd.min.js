function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var o=0;o<i.length;o++){var t=i[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,i,o){return i&&_defineProperties(e.prototype,i),o&&_defineProperties(e,o),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e=e||self).window=e.window||{})}(this,(function(e){"use strict";var i=function(){function e(i){var o=this,t=i.root,n=i.rootMargin,r=void 0===n?"0px":n,l=i.threshold,s=void 0===l?0:l;_classCallCheck(this,e),window.IntersectionObserver?(this.root=document.querySelector(t),this.root||(this.root="viewport"),this.rootMargin=r,this.threshold=s,this.els=[],this._staggerEls=[],this.observer=new IntersectionObserver(this._callback.bind(this),{root:"viewport"===this.root?null:this.root,rootMargin:this.rootMargin,threshold:this.threshold})):setTimeout((function(){o._onErrorCallback&&o._onErrorCallback()}),0)}return _createClass(e,[{key:"_callback",value:function(e){var i=this;e.forEach((function(e,o){var t=i.els.find((function(i){return i.el.isSameNode(e.target)}));if(t){if(e.intersectionRatio>t.triggerRatio){if(t.alwaysTrigger||!t.inView){t.onBeforeElVisible&&t.onBeforeElVisible(t),i._onBeforeElVisibleCallback&&i._onBeforeElVisibleCallback(t);var n=t.stagger;i._staggerEls.forEach((function(e){e.inView&&(n+=e.stagger)})),i._staggerEls.push(t),setTimeout((function(){t.onElVisible&&t.onElVisible(t),i._onElVisibleCallback&&i._onElVisibleCallback(t),i._staggerEls=i._staggerEls.filter((function(e){return t.id!==e.id}))}),n)}t.inView=!0}else t.inView&&e.intersectionRatio<=t.triggerRatio&&(t.inView=!1,t.onElHidden&&t.onElHidden(t),i._onElHiddenCallback&&i._onElHiddenCallback(t),t.keepObserving||i._unobserve(t));t.ratio=e.intersectionRatio,t.boundingClientRect=e.boundingClientRect}}))}},{key:"observe",value:function(e){for(var i=e.elements,o=void 0===i?[]:i,t=e.selector,n=e.keepObserving,r=void 0!==n&&n,l=e.triggerRatio,s=void 0===l?0:l,a=e.alwaysTrigger,u=void 0===a||a,c=e.stagger,f=void 0===c?0:c,b=e.onBeforeElVisible,d=void 0===b?function(){}:b,h=e.onElVisible,v=void 0===h?function(){}:h,g=e.onElHidden,y=void 0===g?function(){}:g,E=o.length?o:document.querySelectorAll(t),p=0;p<E.length;p++)this.els.push({el:E[p],keepObserving:r,triggerRatio:Math.max(0,Math.min(1,s))||0,alwaysTrigger:u,ratio:0,stagger:f,onBeforeElVisible:d,onElVisible:v,onElHidden:y,inView:!1,boundingClientRect:{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}}),this.observer.observe(E[p])}},{key:"_unobserve",value:function(e){this.observer.unobserve(e.el),this.els=this.els.filter((function(i){return!i.el.isSameNode(e.el)}))}},{key:"unobserveEl",value:function(e){var i=this.els.find((function(i){return i.el.isSameNode(e)}));i&&this._unobserve(i)}},{key:"unobserveEls",value:function(e){for(var i=0;i<e.length;i++)this.unobserveEl(e[i])}},{key:"unobserveAll",value:function(){this.observer.disconnect(),this.els=[]}},{key:"onError",value:function(e){return e&&(this._onErrorCallback=e),this}},{key:"onBeforeElVisible",value:function(e){return e&&(this._onBeforeElVisibleCallback=e),this}},{key:"onElVisible",value:function(e){return e&&(this._onElVisibleCallback=e),this}},{key:"onElHidden",value:function(e){return e&&(this._onElHiddenCallback=e),this}}]),e}();e.ScrollObserver=i,Object.defineProperty(e,"__esModule",{value:!0})}));
